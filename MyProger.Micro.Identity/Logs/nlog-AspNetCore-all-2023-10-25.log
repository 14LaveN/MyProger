2023-10-25 15:04:29.3248|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:04:29.3907|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:04:29.4133|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:04:29.4133|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:04:29.4133|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:04:29.4133|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:04:29.4133|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:04:29.4267|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:04:29.4267|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:04:29.4267|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:04:29.4267|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:04:29.4267|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:04:29.4267|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:04:29.4267|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:04:29.4267|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:04:29.5829|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:04:29.5982|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:04:29.5982|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:04:29.5982|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:04:29.5982|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:04:29.5982|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:04:29.5982|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:04:29.6463|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL75IOK9U0" received FIN. 
2023-10-25 15:04:29.6463|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL75IOK9U0" accepted. 
2023-10-25 15:04:29.6463|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL75IOK9U0" started. 
2023-10-25 15:04:29.6637|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:04:29.6866|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL75IOK9U0" stopped. 
2023-10-25 15:04:29.6866|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL75IOK9U0" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:04:29.8171|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL75IOK9U1" accepted. 
2023-10-25 15:04:29.8171|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL75IOK9U1" started. 
2023-10-25 15:04:29.8639|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL75IOK9U1 established using the following protocol: Tls13 
2023-10-25 15:04:29.8885|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:04:29.8885|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:04:29.8885|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:04:29.8885|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:04:29.8885|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:04:29.8885|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received HEADERS frame for stream ID 1 with length 1611 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:04:29.9009|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:04:29.9199|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger - - 
2023-10-25 15:04:29.9199|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:04:29.9199|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:04:30.0663|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:04:30.5294|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:04:30.5294|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:04:30.5294|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:04:30.6257|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:04:30.6257|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:04:30.7662|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:04:30.7869|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:04:30.9464|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:04:30.9698|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:04:30.9698|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:04:30.9989|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (25ms). 
2023-10-25 15:04:30.9989|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (33ms). 
2023-10-25 15:04:30.9989|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (36ms). 
2023-10-25 15:04:31.0063|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:31.7941|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:31.8029|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:31.9233|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (120ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:31.9322|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:31.9322|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 10ms reading results. 
2023-10-25 15:04:31.9422|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:31.9422|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:04:31.9849|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending HEADERS frame for stream ID 1 with length 69 and flags END_STREAM, END_HEADERS. 
2023-10-25 15:04:31.9849|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:04:31.9849|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:31.9895|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received HEADERS frame for stream ID 3 with length 43 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:04:31.9895|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:04:31.9895|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (2ms). 
2023-10-25 15:04:31.9895|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger - - - 301 0 - 2073.7570ms 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:31.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.0039|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.0039|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.0039|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:04:32.0039|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.0039|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.0874|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending HEADERS frame for stream ID 3 with length 28 and flags END_HEADERS. 
2023-10-25 15:04:32.0874|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 3 with length 4758 and flags NONE. 
2023-10-25 15:04:32.0874|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:04:32.0874|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:04:32.0874|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.0874|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.0874|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 104.2192ms 
2023-10-25 15:04:32.1340|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received HEADERS frame for stream ID 5 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:04:32.1340|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/swagger-ui.css - - 
2023-10-25 15:04:32.1340|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received HEADERS frame for stream ID 7 with length 59 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:04:32.1340|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:04:32.1340|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received HEADERS frame for stream ID 9 with length 57 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:04:32.1340|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/swagger-ui-bundle.js - - 
2023-10-25 15:04:32.1340|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:04:32.1340|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/swagger-ui-standalone-preset.js - - 
2023-10-25 15:04:32.1340|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.1563|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.1563|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.1820|0|TRACE|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Range header's value is empty. 
2023-10-25 15:04:32.1820|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending HEADERS frame for stream ID 7 with length 87 and flags END_HEADERS. 
2023-10-25 15:04:32.1820|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.1820|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.1820|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.1820|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2158|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2158|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2158|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2158|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.2330|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.2330|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.2330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.2330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:04:32.2330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2330|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.2330|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.2526|0|TRACE|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Range header's value is empty. 
2023-10-25 15:04:32.2526|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2526|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2526|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2526|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending HEADERS frame for stream ID 5 with length 43 and flags END_HEADERS. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 13857 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2561|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A' 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:04:32.2714|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.2714|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 5 with length 0 and flags END_STREAM. 
2023-10-25 15:04:32.2714|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/swagger-ui.css - - - 200 144929 text/css 137.4723ms 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 16384 and flags NONE. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 12960 and flags NONE. 
2023-10-25 15:04:32.2714|0|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A' 
2023-10-25 15:04:32.2714|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:04:32.2714|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 7 with length 0 and flags END_STREAM. 
2023-10-25 15:04:32.2714|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.2714|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.2714|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/swagger-ui-bundle.js - - - 200 1061536 text/javascript 143.8214ms 
2023-10-25 15:04:32.3035|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.3035|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.3035|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.3035|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.3035|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:04:32.3035|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.3035|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.3035|0|TRACE|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Range header's value is empty. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending HEADERS frame for stream ID 9 with length 34 and flags END_HEADERS. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 16384 and flags NONE. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 867 and flags NONE. 
2023-10-25 15:04:32.3179|0|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A' 
2023-10-25 15:04:32.3179|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:04:32.3179|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 9 with length 0 and flags END_STREAM. 
2023-10-25 15:04:32.3179|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.3179|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.3179|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/swagger-ui-standalone-preset.js - - - 200 312163 text/javascript 184.4228ms 
2023-10-25 15:04:32.4197|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received HEADERS frame for stream ID 11 with length 73 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:04:32.4197|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:04:32.4197|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.4197|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:04:32.4197|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.5417|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending HEADERS frame for stream ID 11 with length 65 and flags END_HEADERS. 
2023-10-25 15:04:32.5417|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 11 with length 6125 and flags NONE. 
2023-10-25 15:04:32.5417|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:04:32.5417|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 11 with length 0 and flags END_STREAM. 
2023-10-25 15:04:32.5417|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:04:32.5417|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:04:32.5417|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.1664ms 
2023-10-25 15:05:22.0373|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received HEADERS frame for stream ID 13 with length 90 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:05:22.0727|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:05:22.0727|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 225 
2023-10-25 15:05:22.0727|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:05:22.0727|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:05:22.0727|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received DATA frame for stream ID 13 with length 225 and flags END_STREAM. 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:05:22.0727|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:05:22.0727|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:05:22.1012|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:05:22.1012|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:05:22.1012|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:05:22.1606|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:05:22.1606|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:05:22.1775|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:05:22.1775|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:05:22.1775|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:05:22.1775|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:05:22.1775|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:05:22.1775|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:05:22.1775|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:05:22.1775|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:05:22.1923|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:05:22.1923|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:05:22.1923|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:05:22.1923|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL75IOK9U1", Request id "0HMUL75IOK9U1:0000000D": started reading request body. 
2023-10-25 15:05:22.1923|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL75IOK9U1", Request id "0HMUL75IOK9U1:0000000D": done reading request body. 
2023-10-25 15:05:22.2118|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:05:22.2118|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:05:22.2118|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:05:22.2118|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:05:22.2118|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:05:22.2118|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:05:22.2118|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:05:22.2118|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:05:22.2118|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:05:22.2245|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:05:22.2245|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:05:25.7728|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlav Lavlavch 
2023-10-25 15:05:27.1592|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:05:27.1955|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:05:27.3414|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:05:27.3596|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:05:27.3596|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:27.3596|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:05:27.3644|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:05:27.3644|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:27.3644|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:05:27.5291|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (164ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:05:27.5291|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:27.5291|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 4ms reading results. 
2023-10-25 15:05:27.5360|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:27.5360|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:05:29.1094|0|DEBUG|Microsoft.AspNetCore.Identity.UserManager|User password validation failed: PasswordRequiresNonAlphanumeric. 
2023-10-25 15:05:31.0375|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:05:31.0771|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:05:31.0771|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:05:31.0828|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:05:31.0828|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:05:31.1396|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:05:31.1396|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.1396|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:05:31.1396|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:31.1396|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:31.1396|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:05:31.2088|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (67ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:05:31.2088|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:05:31.2088|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.2088|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 13ms reading results. 
2023-10-25 15:05:31.2233|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.2233|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:05:31.2233|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:05:31.2233|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.6529|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:05:31.6740|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:05:31.6837|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.6837|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 1ms reading results. 
2023-10-25 15:05:31.6837|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.6837|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:05:31.7026|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:05:31.7026|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:05:31.7096|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 4ms reading results. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:05:31.7096|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 0 entities written to the database. 
2023-10-25 15:05:45.4111|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23183.8125ms. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult. 
2023-10-25 15:05:45.4111|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter 
2023-10-25 15:05:45.4111|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|No information found on request to perform content negotiation. 
2023-10-25 15:05:45.4111|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types 'application/json'. 
2023-10-25 15:05:45.4111|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response. 
2023-10-25 15:05:45.4111|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending HEADERS frame for stream ID 13 with length 66 and flags END_HEADERS. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 13 with length 53 and flags NONE. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" received WINDOW_UPDATE frame for stream ID 13 with length 4 and flags 0x0. 
2023-10-25 15:05:45.4111|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) in 23242.2338ms 
2023-10-25 15:05:45.4111|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:05:45.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL75IOK9U1" sending DATA frame for stream ID 13 with length 0 and flags END_STREAM. 
2023-10-25 15:05:45.4111|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:05:45.4111|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:05:45.4111|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:05:45.4111|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 225 - 200 - application/json;+charset=utf-8 23351.9899ms 
2023-10-25 15:06:16.6080|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:06:16.6724|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:06:16.6923|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:06:16.6923|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:06:16.6923|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:06:16.6923|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:06:16.6923|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:06:16.6923|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:06:16.7084|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:06:16.7084|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:06:16.7084|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:06:16.7084|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:06:16.7084|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:06:16.7084|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:06:16.7084|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:06:16.8536|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:06:16.8724|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:06:16.8724|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:06:16.8724|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:06:16.8724|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:06:16.8724|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:06:16.8724|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:06:16.9509|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL76INV1TS" received FIN. 
2023-10-25 15:06:16.9509|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL76INV1TS" accepted. 
2023-10-25 15:06:16.9509|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL76INV1TS" started. 
2023-10-25 15:06:16.9684|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:06:16.9915|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL76INV1TS" stopped. 
2023-10-25 15:06:16.9915|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL76INV1TS" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:06:17.0602|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL76INV1TT" accepted. 
2023-10-25 15:06:17.0602|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL76INV1TT" started. 
2023-10-25 15:06:17.1049|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL76INV1TT established using the following protocol: Tls13 
2023-10-25 15:06:17.1301|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:06:17.1301|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:06:17.1301|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:06:17.1301|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:06:17.1301|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:06:17.1301|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received HEADERS frame for stream ID 1 with length 1619 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:06:17.1301|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:06:17.1582|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:06:17.1582|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:06:17.1582|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:06:17.3013|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:06:17.7287|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:06:17.7287|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:06:17.7287|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:06:17.8071|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:06:17.8071|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:06:17.9388|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:06:17.9582|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:06:18.0746|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:06:18.0949|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:06:18.0949|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:06:18.1218|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (23ms). 
2023-10-25 15:06:18.1218|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (30ms). 
2023-10-25 15:06:18.1218|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (33ms). 
2023-10-25 15:06:18.1295|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:18.2559|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:18.2559|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:06:18.2871|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:06:18.2871|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:18.3019|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 10ms reading results. 
2023-10-25 15:06:18.3019|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:18.3019|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:06:18.4082|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending HEADERS frame for stream ID 1 with length 66 and flags END_HEADERS. 
2023-10-25 15:06:18.4082|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending DATA frame for stream ID 1 with length 4758 and flags NONE. 
2023-10-25 15:06:18.4132|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending DATA frame for stream ID 1 with length 0 and flags END_STREAM. 
2023-10-25 15:06:18.4132|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:06:18.4132|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:18.4132|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (2ms). 
2023-10-25 15:06:18.4132|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1263.9416ms 
2023-10-25 15:06:18.6440|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received HEADERS frame for stream ID 3 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:06:18.6473|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:06:18.6473|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:06:18.6473|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:06:18.6600|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:18.6600|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:06:18.7595|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending HEADERS frame for stream ID 3 with length 35 and flags END_HEADERS. 
2023-10-25 15:06:18.7595|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending DATA frame for stream ID 3 with length 6125 and flags NONE. 
2023-10-25 15:06:18.7595|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:06:18.7595|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:06:18.7595|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:18.7595|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:06:18.7595|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.2422ms 
2023-10-25 15:06:46.1294|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received HEADERS frame for stream ID 5 with length 94 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:06:46.1294|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:06:46.1294|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:06:46.1294|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received DATA frame for stream ID 5 with length 225 and flags END_STREAM. 
2023-10-25 15:06:46.1294|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 225 
2023-10-25 15:06:46.1294|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:06:46.1482|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:06:46.1482|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:06:46.1711|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:06:46.1711|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:06:46.1711|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:06:46.2301|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:06:46.2301|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:06:46.2442|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:06:46.2442|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:06:46.2442|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:06:46.2442|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:06:46.2442|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:06:46.2442|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:06:46.2442|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:06:46.2442|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:06:46.2553|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:06:46.2553|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:06:46.2553|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:06:46.2553|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL76INV1TT", Request id "0HMUL76INV1TT:00000005": started reading request body. 
2023-10-25 15:06:46.2553|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL76INV1TT", Request id "0HMUL76INV1TT:00000005": done reading request body. 
2023-10-25 15:06:46.2727|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:06:46.2727|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:06:46.2727|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:06:46.2727|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:06:46.2727|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:06:46.2727|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:06:46.2727|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:06:46.2727|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:06:46.2727|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:06:46.2727|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:06:46.2727|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:06:54.0911|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlav Lavlavch 
2023-10-25 15:06:54.8909|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:06:54.9080|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:06:55.0455|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:06:55.0644|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:06:55.0644|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:55.0671|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:06:55.0671|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:55.0671|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:55.0671|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:06:55.0914|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:06:55.1310|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:55.1310|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 39ms reading results. 
2023-10-25 15:06:55.1310|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:55.1310|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:06:55.3163|0|DEBUG|Microsoft.AspNetCore.Identity.UserManager|User password validation failed: PasswordRequiresNonAlphanumeric. 
2023-10-25 15:06:55.6487|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:06:55.6943|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:06:55.6943|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:06:55.6943|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:06:55.7078|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:06:55.7578|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:55.7578|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:55.7578|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:06:55.7578|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:55.7578|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:55.7578|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:06:55.7578|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:06:55.7947|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:06:55.7947|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:55.7947|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 34ms reading results. 
2023-10-25 15:06:55.7947|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:55.7947|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:06:55.8073|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:06:55.8073|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:56.1058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:06:56.1264|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:06:56.1479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:56.1479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 18ms reading results. 
2023-10-25 15:06:56.1479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:56.1479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:06:56.1479|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:06:56.1479|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:06:56.1657|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:06:56.1657|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:06:56.1657|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:56.1657|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:06:56.1657|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:06:56.1657|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:56.1657|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:06:56.1657|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:06:56.1657|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:06:56.1764|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:56.1764|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 8ms reading results. 
2023-10-25 15:06:56.1764|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:06:56.1764|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:06:56.1764|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:06:56.1764|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:06:56.1764|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:06:56.1764|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 0 entities written to the database. 
2023-10-25 15:07:02.9471|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16661.1147ms. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult. 
2023-10-25 15:07:02.9471|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter 
2023-10-25 15:07:02.9471|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|No information found on request to perform content negotiation. 
2023-10-25 15:07:02.9471|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types 'application/json'. 
2023-10-25 15:07:02.9471|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response. 
2023-10-25 15:07:02.9471|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending HEADERS frame for stream ID 5 with length 66 and flags END_HEADERS. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending DATA frame for stream ID 5 with length 53 and flags NONE. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:07:02.9471|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received WINDOW_UPDATE frame for stream ID 5 with length 4 and flags 0x0. 
2023-10-25 15:07:02.9586|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) in 16710.8361ms 
2023-10-25 15:07:02.9586|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:07:02.9586|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending DATA frame for stream ID 5 with length 0 and flags END_STREAM. 
2023-10-25 15:07:02.9586|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:07:02.9586|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:07:02.9586|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:07:02.9586|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 225 - 200 - application/json;+charset=utf-8 16829.9339ms 
2023-10-25 15:07:21.4870|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received HEADERS frame for stream ID 7 with length 55 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:07:21.4870|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:07:21.4870|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:07:21.4870|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 229 
2023-10-25 15:07:21.4870|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:07:21.4870|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL76INV1TT" received DATA frame for stream ID 7 with length 229 and flags END_STREAM. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:07:21.4887|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:07:21.4887|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:07:21.4887|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL76INV1TT", Request id "0HMUL76INV1TT:00000007": started reading request body. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL76INV1TT", Request id "0HMUL76INV1TT:00000007": done reading request body. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:07:21.4887|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:07:21.4887|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:07:21.4887|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:07:21.4887|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:07:21.4887|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:07:21.4887|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:07:21.4887|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:07:24.4296|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlavka Lavlavch 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:07:28.8638|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 7ms reading results. 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:07:28.8638|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:07:41.9793|0|DEBUG|Microsoft.AspNetCore.Identity.UserManager|User password validation failed: PasswordRequiresNonAlphanumeric. 
2023-10-25 15:08:26.7531|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:08:26.8165|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:08:26.8355|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:08:26.8355|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:08:26.8355|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:08:26.8355|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:08:26.8355|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:08:26.8496|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:08:26.8496|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:08:26.8496|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:08:26.8496|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:08:26.8496|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:08:26.8496|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:08:26.8496|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:08:26.8496|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:08:26.9921|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:08:27.0417|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:08:27.0417|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:08:27.0417|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:08:27.0417|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:08:27.0417|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:08:27.0417|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:08:27.1609|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL77PHO0IO" received FIN. 
2023-10-25 15:08:27.1609|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL77PHO0IO" accepted. 
2023-10-25 15:08:27.1609|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL77PHO0IO" started. 
2023-10-25 15:08:27.1779|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:08:27.2042|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL77PHO0IO" stopped. 
2023-10-25 15:08:27.2042|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL77PHO0IO" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:08:27.2533|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL77PHO0IP" accepted. 
2023-10-25 15:08:27.2533|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL77PHO0IP" started. 
2023-10-25 15:08:27.2891|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL77PHO0IP established using the following protocol: Tls13 
2023-10-25 15:08:27.3103|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:08:27.3103|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:08:27.3103|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:08:27.3103|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:08:27.3103|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:08:27.3103|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" received HEADERS frame for stream ID 1 with length 1619 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:08:27.3218|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:08:27.3357|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:08:27.3357|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:08:27.3357|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:08:27.4652|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:08:27.8891|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:08:27.8891|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:08:27.8891|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:08:27.9692|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:08:27.9692|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:08:28.0967|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:08:28.1155|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:08:28.2306|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:08:28.2502|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:28.2502|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:08:28.2761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (22ms). 
2023-10-25 15:08:28.2761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (29ms). 
2023-10-25 15:08:28.2761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (32ms). 
2023-10-25 15:08:28.2761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:28.4016|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:28.4105|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:08:28.4336|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:08:28.4420|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:28.4420|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 10ms reading results. 
2023-10-25 15:08:28.4420|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:28.4420|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:08:28.5569|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending HEADERS frame for stream ID 1 with length 66 and flags END_HEADERS. 
2023-10-25 15:08:28.5569|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending DATA frame for stream ID 1 with length 4758 and flags NONE. 
2023-10-25 15:08:28.5569|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending DATA frame for stream ID 1 with length 0 and flags END_STREAM. 
2023-10-25 15:08:28.5569|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:08:28.5673|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:28.5673|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (1ms). 
2023-10-25 15:08:28.5673|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1235.2136ms 
2023-10-25 15:08:28.7077|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" received HEADERS frame for stream ID 3 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:08:28.7077|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:08:28.7077|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:28.7077|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:08:28.7227|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:08:28.7227|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:28.7227|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:08:28.7227|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:28.7227|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:28.8155|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending HEADERS frame for stream ID 3 with length 35 and flags END_HEADERS. 
2023-10-25 15:08:28.8155|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending DATA frame for stream ID 3 with length 6125 and flags NONE. 
2023-10-25 15:08:28.8176|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:08:28.8176|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:08:28.8176|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:28.8176|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:28.8176|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 107.2321ms 
2023-10-25 15:08:34.7493|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" received HEADERS frame for stream ID 5 with length 94 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:08:34.7493|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL77PHO0IP" received DATA frame for stream ID 5 with length 230 and flags END_STREAM. 
2023-10-25 15:08:34.7493|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 230 
2023-10-25 15:08:34.7493|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:08:34.7676|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:34.7676|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:34.7702|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:08:34.7702|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:08:34.7913|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:08:34.7913|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:08:34.7913|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:08:34.8506|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:08:34.8506|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:08:34.8659|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:08:34.8659|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:08:34.8794|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:08:34.8794|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL77PHO0IP", Request id "0HMUL77PHO0IP:00000005": started reading request body. 
2023-10-25 15:08:34.8794|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL77PHO0IP", Request id "0HMUL77PHO0IP:00000005": done reading request body. 
2023-10-25 15:08:34.8794|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:08:34.8794|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:08:34.8794|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:08:34.8949|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:08:34.8949|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:08:34.8949|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:08:34.8949|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:08:34.8949|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:08:34.8949|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:08:34.8949|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:08:34.8949|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:08:36.9991|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlavka Lavlavch 
2023-10-25 15:08:38.1064|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:08:38.1223|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:08:38.2539|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:08:38.2705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:38.2705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:38.2705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:08:38.2705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:38.2705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:38.2705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:08:38.2934|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:08:38.3266|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:38.3266|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 33ms reading results. 
2023-10-25 15:08:38.3266|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:38.3266|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)' 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:08:40.0129|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:40.0129|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:40.0653|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."AppUser"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:40.1268|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:40.1300|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:08:40.1300|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:08:40.1466|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:08:40.2024|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:40.2024|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:40.2024|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:40.2024|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:40.2024|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:40.2024|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:08:40.2583|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:08:40.2583|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'AppUser.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:08:40.2727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:40.2727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 14ms reading results. 
2023-10-25 15:08:40.2727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:40.2727|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:40.2727|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:40.2860|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:08:43.1728|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:43.1797|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:08:43.1797|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:08:43.2425|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:08:43.2425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.2425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 66ms reading results. 
2023-10-25 15:08:43.2425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.2425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:43.2425|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:43.2425|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:08:43.6552|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:08:43.6552|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:08:43.6613|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:08:43.6613|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:43.6613|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:43.6613|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:43.6613|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:43.6613|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.6613|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:08:43.6613|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:08:43.7307|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.7307|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 55ms reading results. 
2023-10-25 15:08:43.7307|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.7307|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:43.7307|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:08:43.7307|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:08:43.7385|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:08:43.7385|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|1 entities were added and 0 entities were removed from skip navigation 'AppUser.Scopes'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:43.7640|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUserScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:43.7640|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Update|Executing 2 update commands as a batch. 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Beginning transaction with isolation level 'Unspecified'. 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Began transaction with isolation level 'ReadCommitted'. 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:43.7768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:08:43.8643|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committing transaction. 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committed transaction. 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Disposing transaction. 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUserScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:08:43.8643|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 2 entities written to the database. 
2023-10-25 15:08:48.3200|0|INFO|MyProger.Micro.Identity.Commands.Login.LoginCommandHandler|Request for login an account - Lavlavka 
2023-10-25 15:08:49.7695|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:08:49.7696|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:49.7696|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:08:49.7696|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:08:49.7696|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:49.7696|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:08:49.7696|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:08:49.8019|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:49.8019|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 30ms reading results. 
2023-10-25 15:08:49.8019|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:08:49.8019|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The unchanged property 'AppUser.RefreshToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:09:24.6942|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:09:24.6942|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:15:44.1058|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:15:44.1744|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:15:44.1967|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:15:44.1967|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:15:44.1967|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:15:44.1967|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:15:44.1967|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:15:44.2110|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:15:44.2110|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:15:44.2110|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:15:44.2110|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:15:44.2110|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:15:44.2110|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:15:44.2228|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:15:44.2228|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:15:44.3779|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:15:44.3946|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:15:44.3946|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:15:44.3946|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:15:44.3946|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:15:44.3946|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:15:44.3946|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:15:44.7717|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7BRV46NP" received FIN. 
2023-10-25 15:15:44.7717|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7BRV46NP" accepted. 
2023-10-25 15:15:44.7717|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7BRV46NP" started. 
2023-10-25 15:15:44.7916|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:15:44.8181|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7BRV46NP" stopped. 
2023-10-25 15:15:44.8181|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7BRV46NP" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:15:44.8793|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7BRV46NQ" accepted. 
2023-10-25 15:15:44.8793|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7BRV46NQ" started. 
2023-10-25 15:15:44.9172|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL7BRV46NQ established using the following protocol: Tls13 
2023-10-25 15:15:44.9408|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:15:44.9423|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:15:44.9423|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:15:44.9423|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:15:44.9423|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:15:44.9423|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" received HEADERS frame for stream ID 1 with length 1619 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:15:44.9423|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:15:44.9692|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:15:44.9692|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:15:44.9692|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:15:45.1068|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:15:45.5197|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:15:45.5197|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:15:45.5197|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:15:45.5991|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:15:45.5991|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:15:45.7357|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:15:45.7559|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:15:45.8767|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:15:45.8976|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:15:45.8976|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:15:45.9261|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (25ms). 
2023-10-25 15:15:45.9261|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (32ms). 
2023-10-25 15:15:45.9261|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (35ms). 
2023-10-25 15:15:45.9261|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:15:46.0614|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:15:46.0700|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:15:46.0941|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:15:46.1020|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:15:46.1020|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 9ms reading results. 
2023-10-25 15:15:46.1020|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:15:46.1152|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:15:46.2228|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending HEADERS frame for stream ID 1 with length 66 and flags END_HEADERS. 
2023-10-25 15:15:46.2228|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending DATA frame for stream ID 1 with length 4758 and flags NONE. 
2023-10-25 15:15:46.2228|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending DATA frame for stream ID 1 with length 0 and flags END_STREAM. 
2023-10-25 15:15:46.2228|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:15:46.2228|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:15:46.2228|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (2ms). 
2023-10-25 15:15:46.2228|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1268.3338ms 
2023-10-25 15:15:46.3767|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" received HEADERS frame for stream ID 3 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:15:46.3801|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:15:46.3801|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:15:46.3801|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:15:46.3950|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:15:46.3950|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:15:46.4947|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending HEADERS frame for stream ID 3 with length 65 and flags END_HEADERS. 
2023-10-25 15:15:46.4947|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending DATA frame for stream ID 3 with length 6125 and flags NONE. 
2023-10-25 15:15:46.4947|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:15:46.4947|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:15:46.4947|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:15:46.4947|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:15:46.4947|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.7895ms 
2023-10-25 15:16:01.6458|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" received HEADERS frame for stream ID 5 with length 94 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:16:01.6458|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:16:01.6458|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:16:01.6458|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 232 
2023-10-25 15:16:01.6458|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:16:01.6458|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7BRV46NQ" received DATA frame for stream ID 5 with length 232 and flags END_STREAM. 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:16:01.6651|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:16:01.6651|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:16:01.6888|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:16:01.6888|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:16:01.6888|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:16:01.7608|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:16:01.7608|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:16:01.7754|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:16:01.7754|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:16:01.7754|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:16:01.7754|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:16:01.7754|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:16:01.7754|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:16:01.7754|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:16:01.7754|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:16:01.7878|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:16:01.7878|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:16:01.7878|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:16:01.7878|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7BRV46NQ", Request id "0HMUL7BRV46NQ:00000005": started reading request body. 
2023-10-25 15:16:01.7878|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7BRV46NQ", Request id "0HMUL7BRV46NQ:00000005": done reading request body. 
2023-10-25 15:16:01.8051|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:16:01.8051|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:16:01.8051|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:16:01.8051|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:16:01.8051|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:16:01.8051|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:16:01.8051|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:16:01.8051|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:16:01.8051|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:16:01.8166|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:16:01.8166|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:16:03.9876|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlavkac Lavlavch 
2023-10-25 15:16:04.3090|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:16:04.3258|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:16:04.4673|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:16:04.4851|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:04.4851|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:04.4851|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:16:04.4894|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:04.4894|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:04.4894|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:16:04.5096|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:16:04.5463|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:04.5463|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 37ms reading results. 
2023-10-25 15:16:04.5463|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:04.5463|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)' 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:16:04.8251|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:04.8251|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:16:04.8804|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."AppUser"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:04.9439|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:04.9439|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:16:04.9439|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:16:04.9649|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:16:05.0128|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:05.0128|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.0128|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:05.0128|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.0128|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.0128|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:16:05.0221|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:16:05.0221|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'AppUser.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:16:05.0359|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.0359|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 13ms reading results. 
2023-10-25 15:16:05.0359|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.0359|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:16:05.0359|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.0359|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.2862|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:16:05.2862|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:16:05.3200|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:16:05.3200|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.3200|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 31ms reading results. 
2023-10-25 15:16:05.3200|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.3400|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (8ms). 
2023-10-25 15:16:05.3400|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.3400|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:16:05.4229|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:16:05.4229|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:16:05.4302|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:16:05.4302|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:05.4302|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.4302|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.4302|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:05.4302|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.4302|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:16:05.4302|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 31ms reading results. 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.4746|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:16:05.4746|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:16:05.4888|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.4888|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:16:05.4888|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.4888|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:16:05.4888|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.4888|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:16:05.4888|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:16:05.4888|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|1 entities were added and 0 entities were removed from skip navigation 'AppUser.Scopes'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.5124|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUserScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.5124|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Update|Executing 2 update commands as a batch. 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Beginning transaction with isolation level 'Unspecified'. 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Began transaction with isolation level 'ReadCommitted'. 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:05.5258|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:16:05.5358|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committing transaction. 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committed transaction. 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Disposing transaction. 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUserScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:16:05.5358|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 2 entities written to the database. 
2023-10-25 15:16:07.4868|0|INFO|MyProger.Micro.Identity.Commands.Login.LoginCommandHandler|Request for login an account - Lavlavkac 
2023-10-25 15:16:07.9171|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:16:07.9171|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:07.9171|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:16:07.9171|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:16:07.9171|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:07.9171|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:16:07.9171|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:16:07.9521|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:07.9521|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 25ms reading results. 
2023-10-25 15:16:07.9521|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:16:07.9521|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:18:58.8778|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:18:58.9549|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:18:58.9844|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:18:58.9844|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:18:58.9891|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:18:58.9891|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:18:58.9891|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:18:58.9891|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:18:58.9891|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:18:58.9891|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:18:59.0049|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:18:59.0049|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:18:59.0049|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:18:59.0049|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:18:59.0049|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:18:59.1727|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:18:59.1906|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:18:59.1906|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:18:59.1906|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:18:59.1906|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:18:59.1915|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:18:59.1915|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:18:59.5236|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7DM0DOE9" received FIN. 
2023-10-25 15:18:59.5236|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7DM0DOE9" accepted. 
2023-10-25 15:18:59.5236|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7DM0DOE9" started. 
2023-10-25 15:18:59.5441|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:18:59.5724|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7DM0DOE9" stopped. 
2023-10-25 15:18:59.5724|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7DM0DOE9" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:18:59.6336|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7DM0DOEA" accepted. 
2023-10-25 15:18:59.6336|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7DM0DOEA" started. 
2023-10-25 15:18:59.6720|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL7DM0DOEA established using the following protocol: Tls13 
2023-10-25 15:18:59.6958|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:18:59.6958|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:18:59.6958|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:18:59.6958|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:18:59.6958|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:18:59.6958|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" received HEADERS frame for stream ID 1 with length 1619 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:18:59.7084|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:18:59.7250|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:18:59.7250|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:18:59.7250|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:18:59.8790|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:19:00.3124|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:19:00.3124|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:19:00.3124|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:19:00.3902|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:19:00.3902|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:19:00.5175|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:19:00.5372|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:19:00.6557|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:19:00.6751|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:00.6765|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:19:00.7008|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (22ms). 
2023-10-25 15:19:00.7008|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (29ms). 
2023-10-25 15:19:00.7008|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (32ms). 
2023-10-25 15:19:00.7079|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:00.8439|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:00.8529|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:19:00.8791|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:19:00.8880|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:00.8952|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 10ms reading results. 
2023-10-25 15:19:00.8952|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:00.8952|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:19:01.0082|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending HEADERS frame for stream ID 1 with length 66 and flags END_HEADERS. 
2023-10-25 15:19:01.0082|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending DATA frame for stream ID 1 with length 4758 and flags NONE. 
2023-10-25 15:19:01.0082|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending DATA frame for stream ID 1 with length 0 and flags END_STREAM. 
2023-10-25 15:19:01.0082|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:19:01.0082|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:01.0210|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (2ms). 
2023-10-25 15:19:01.0210|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1298.5416ms 
2023-10-25 15:19:01.1697|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" received HEADERS frame for stream ID 3 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:19:01.1697|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:19:01.1697|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:19:01.1856|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:01.1856|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:01.2833|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending HEADERS frame for stream ID 3 with length 65 and flags END_HEADERS. 
2023-10-25 15:19:01.2833|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending DATA frame for stream ID 3 with length 6125 and flags NONE. 
2023-10-25 15:19:01.2902|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:19:01.2902|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:19:01.2902|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:01.2902|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:01.2902|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.6091ms 
2023-10-25 15:19:22.5201|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" received HEADERS frame for stream ID 5 with length 94 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:19:22.5201|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:19:22.5201|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:19:22.5201|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7DM0DOEA" received DATA frame for stream ID 5 with length 232 and flags END_STREAM. 
2023-10-25 15:19:22.5201|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 232 
2023-10-25 15:19:22.5201|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:19:22.5412|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:19:22.5412|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:19:22.5648|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:19:22.5648|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:19:22.5648|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:19:22.6257|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:19:22.6257|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:19:22.6394|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:19:22.6394|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:19:22.6394|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:19:22.6394|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:19:22.6394|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:19:22.6394|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:19:22.6394|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:19:22.6394|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:19:22.6508|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:19:22.6508|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:19:22.6508|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:19:22.6638|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7DM0DOEA", Request id "0HMUL7DM0DOEA:00000005": started reading request body. 
2023-10-25 15:19:22.6638|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7DM0DOEA", Request id "0HMUL7DM0DOEA:00000005": done reading request body. 
2023-10-25 15:19:22.6638|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:19:22.6638|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:19:22.6638|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:19:22.6638|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:19:22.6766|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:19:22.6766|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:19:22.6766|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:19:22.6766|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:19:22.6766|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:19:22.6766|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:19:22.6766|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:19:28.6831|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlavkas Lavlavch 
2023-10-25 15:19:29.3346|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:19:29.3498|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:19:29.4811|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:19:29.4982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:29.4982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:29.4982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:19:29.4982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:29.4982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:29.5052|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:19:29.5210|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:19:29.5554|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:29.5554|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 34ms reading results. 
2023-10-25 15:19:29.5554|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:29.5554|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)' 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:19:31.6072|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:31.6072|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:31.6593|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."AppUser"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:31.7187|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:31.7187|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:19:31.7246|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:19:31.7391|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:19:31.7880|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:31.7880|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:31.7880|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:31.7880|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:31.7880|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:31.7880|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:19:31.7880|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:19:31.8068|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'AppUser.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:19:31.8068|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:31.8068|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 13ms reading results. 
2023-10-25 15:19:31.8068|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:31.8068|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:31.8190|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:31.8190|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:19:32.9831|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:32.9895|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:19:32.9895|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:19:33.0269|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:19:33.0269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.0269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 31ms reading results. 
2023-10-25 15:19:33.0269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.0269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:33.0269|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:33.0269|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.2604|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:19:33.2706|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:19:33.3133|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.3133|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 33ms reading results. 
2023-10-25 15:19:33.3133|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.3133|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:33.3133|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:19:33.3133|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:19:33.3214|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:19:33.3214|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|1 entities were added and 0 entities were removed from skip navigation 'AppUser.Scopes'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:33.3467|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUserScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:33.3467|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:19:33.3593|0|DEBUG|Microsoft.EntityFrameworkCore.Update|Executing 2 update commands as a batch. 
2023-10-25 15:19:33.3593|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:33.3593|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.3593|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Beginning transaction with isolation level 'Unspecified'. 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Began transaction with isolation level 'ReadCommitted'. 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:19:33.3658|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committing transaction. 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committed transaction. 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:33.3658|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:33.3795|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Disposing transaction. 
2023-10-25 15:19:33.3795|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:33.3795|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUserScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:33.3795|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 2 entities written to the database. 
2023-10-25 15:19:36.2120|0|INFO|MyProger.Micro.Identity.Commands.Login.LoginCommandHandler|Request for login an account - Lavlavkas 
2023-10-25 15:19:36.8464|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:36.8464|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:36.8464|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:36.8464|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:36.8464|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:36.8464|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:19:36.8486|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:19:36.8824|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:36.8824|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 33ms reading results. 
2023-10-25 15:19:36.8824|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:36.8824|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The unchanged property 'AppUser.RefreshToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:19:53.4970|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:19:53.4970|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:26:06.7694|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:26:06.8411|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:26:06.8622|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:26:06.8658|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:26:06.8658|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:26:06.8658|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:26:06.8658|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:26:06.8804|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:26:06.8804|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:26:06.8804|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:26:06.8804|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:26:06.8804|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:26:06.8804|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:26:06.8804|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:26:06.8804|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:26:07.0338|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:26:07.0521|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:26:07.0521|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:26:07.0521|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:26:07.0521|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:26:07.0521|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:26:07.0521|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:26:07.0992|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7HLE3GCK" received FIN. 
2023-10-25 15:26:07.0992|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7HLE3GCK" accepted. 
2023-10-25 15:26:07.0992|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7HLE3GCK" started. 
2023-10-25 15:26:07.1190|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:26:07.1449|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7HLE3GCK" stopped. 
2023-10-25 15:26:07.1449|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7HLE3GCK" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:26:07.2092|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7HLE3GCL" accepted. 
2023-10-25 15:26:07.2092|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7HLE3GCL" started. 
2023-10-25 15:26:07.2466|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL7HLE3GCL established using the following protocol: Tls13 
2023-10-25 15:26:07.2682|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:26:07.2682|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:26:07.2700|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:26:07.2700|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:26:07.2700|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:26:07.2700|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" received HEADERS frame for stream ID 1 with length 1619 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:26:07.2700|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:26:07.2940|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:26:07.2940|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:26:07.2940|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:26:07.4205|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:26:07.8419|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:26:07.8419|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:26:07.8419|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:26:07.9204|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:26:07.9204|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:26:08.0458|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:26:08.0665|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:26:08.1832|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:26:08.2041|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:08.2041|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:26:08.2299|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (22ms). 
2023-10-25 15:26:08.2299|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (29ms). 
2023-10-25 15:26:08.2299|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (32ms). 
2023-10-25 15:26:08.2299|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:08.3559|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:08.3645|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:26:08.3882|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:26:08.3965|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:08.3965|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 9ms reading results. 
2023-10-25 15:26:08.3965|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:08.3965|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:26:08.5112|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending HEADERS frame for stream ID 1 with length 66 and flags END_HEADERS. 
2023-10-25 15:26:08.5112|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending DATA frame for stream ID 1 with length 4758 and flags NONE. 
2023-10-25 15:26:08.5112|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending DATA frame for stream ID 1 with length 0 and flags END_STREAM. 
2023-10-25 15:26:08.5112|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:26:08.5217|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:08.5217|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (1ms). 
2023-10-25 15:26:08.5217|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1231.3535ms 
2023-10-25 15:26:08.6647|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" received HEADERS frame for stream ID 3 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:26:08.6647|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:26:08.6647|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:26:08.6772|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:08.6772|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:08.7756|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending HEADERS frame for stream ID 3 with length 35 and flags END_HEADERS. 
2023-10-25 15:26:08.7756|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending DATA frame for stream ID 3 with length 6125 and flags NONE. 
2023-10-25 15:26:08.7756|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:26:08.7756|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:26:08.7756|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:08.7756|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:08.7756|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 109.9166ms 
2023-10-25 15:26:20.5663|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" received HEADERS frame for stream ID 5 with length 95 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:26:20.5663|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:26:20.5663|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 234 
2023-10-25 15:26:20.5663|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:26:20.5663|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:26:20.5663|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7HLE3GCL" received DATA frame for stream ID 5 with length 234 and flags END_STREAM. 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:26:20.5863|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:26:20.5863|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:26:20.6099|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:26:20.6099|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:26:20.6099|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:26:20.6791|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:26:20.6791|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:26:20.6921|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:26:20.6921|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:26:20.7164|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7HLE3GCL", Request id "0HMUL7HLE3GCL:00000005": started reading request body. 
2023-10-25 15:26:20.7164|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7HLE3GCL", Request id "0HMUL7HLE3GCL:00000005": done reading request body. 
2023-10-25 15:26:20.7164|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:26:20.7164|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:26:20.7164|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:26:20.7164|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:26:20.7285|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:26:20.7285|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:26:20.7285|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:26:20.7285|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:26:20.7285|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:26:20.7285|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:26:20.7285|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:26:24.6998|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlavksda Lavlavch 
2023-10-25 15:26:25.0292|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:26:25.0453|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:26:25.1807|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:26:25.1981|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:25.1981|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:25.1981|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:26:25.1981|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:25.1981|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.1981|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:26:25.2230|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:26:25.2572|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.2572|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 34ms reading results. 
2023-10-25 15:26:25.2572|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.2572|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)' 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:26:25.4978|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.4978|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:25.5487|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."AppUser"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:25.6098|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:25.6131|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:26:25.6131|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:26:25.6308|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:26:25.6806|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:25.6806|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.6806|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:25.6806|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:25.6806|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:25.6806|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:26:25.6806|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:26:25.7001|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'AppUser.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:26:25.7001|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.7001|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 14ms reading results. 
2023-10-25 15:26:25.7001|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.7001|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:25.7129|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:25.7129|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:26:25.9176|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:25.9176|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:25.9176|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:26:25.9176|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:26:25.9269|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:26:25.9269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:25.9269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.9269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:25.9269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:25.9269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:25.9269|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:26:25.9269|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:26:25.9534|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:26:25.9614|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.9614|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 31ms reading results. 
2023-10-25 15:26:25.9614|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:25.9614|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:25.9614|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:25.9614|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:26:26.0610|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:26:26.0610|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:26:26.0667|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:26:26.0667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:26.0667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:26.0667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:26.0667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:26.0667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.0667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:26:26.0667|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:26:26.1103|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.1103|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 39ms reading results. 
2023-10-25 15:26:26.1103|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.1103|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:26.1103|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:26:26.1103|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:26:26.1190|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:26:26.1190|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|1 entities were added and 0 entities were removed from skip navigation 'AppUser.Scopes'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:26.1447|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUserScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:26.1447|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:26:26.1447|0|DEBUG|Microsoft.EntityFrameworkCore.Update|Executing 2 update commands as a batch. 
2023-10-25 15:26:26.1447|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:26.1447|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Beginning transaction with isolation level 'Unspecified'. 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Began transaction with isolation level 'ReadCommitted'. 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:26:26.1623|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:26:26.1623|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committing transaction. 
2023-10-25 15:26:26.1780|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committed transaction. 
2023-10-25 15:26:26.1780|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.1780|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:26.1780|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Disposing transaction. 
2023-10-25 15:26:26.1780|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:26.1780|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUserScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:26.1780|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 2 entities written to the database. 
2023-10-25 15:26:26.7145|0|INFO|MyProger.Micro.Identity.Commands.Login.LoginCommandHandler|Request for login an account - Lavlavksda 
2023-10-25 15:26:26.9421|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:26.9421|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:26.9421|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:26.9421|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:26.9421|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.9421|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:26:26.9421|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:26:26.9753|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.9753|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 31ms reading results. 
2023-10-25 15:26:26.9753|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:26.9753|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The unchanged property 'AppUser.RefreshToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:26:44.0925|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:26:44.0925|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:30:07.5564|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:30:07.6216|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:30:07.6406|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:30:07.6406|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:30:07.6448|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:30:07.6448|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:30:07.6448|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:30:07.6448|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:30:07.6448|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:30:07.6448|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:30:07.6448|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:30:07.6610|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:30:07.6610|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:30:07.6610|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:30:07.6610|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:30:07.8063|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:30:07.8230|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:30:07.8230|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:30:07.8230|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:30:07.8230|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:30:07.8230|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:30:07.8230|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:30:07.9460|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7JT703KS" received FIN. 
2023-10-25 15:30:07.9460|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7JT703KS" accepted. 
2023-10-25 15:30:07.9460|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7JT703KS" started. 
2023-10-25 15:30:07.9639|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:30:07.9882|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7JT703KS" stopped. 
2023-10-25 15:30:07.9902|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7JT703KS" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:30:08.0629|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7JT703KT" accepted. 
2023-10-25 15:30:08.0629|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7JT703KT" started. 
2023-10-25 15:30:08.1013|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL7JT703KT established using the following protocol: Tls13 
2023-10-25 15:30:08.1238|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:30:08.1238|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:30:08.1238|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:30:08.1238|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:30:08.1238|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:30:08.1238|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" received HEADERS frame for stream ID 1 with length 1619 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:30:08.1351|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:30:08.1511|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:30:08.1511|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:30:08.1511|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:30:08.2792|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:30:08.6863|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:30:08.6863|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:30:08.6863|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:30:08.7636|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:30:08.7636|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:30:08.8914|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:30:08.9112|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:30:09.0230|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:30:09.0431|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:09.0431|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:30:09.0700|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (23ms). 
2023-10-25 15:30:09.0700|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (30ms). 
2023-10-25 15:30:09.0700|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (33ms). 
2023-10-25 15:30:09.0700|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:09.1940|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:09.1940|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:09.2245|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:09.2245|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:09.2384|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 9ms reading results. 
2023-10-25 15:30:09.2384|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:09.2384|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:30:09.3442|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending HEADERS frame for stream ID 1 with length 66 and flags END_HEADERS. 
2023-10-25 15:30:09.3442|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending DATA frame for stream ID 1 with length 4758 and flags NONE. 
2023-10-25 15:30:09.3490|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending DATA frame for stream ID 1 with length 0 and flags END_STREAM. 
2023-10-25 15:30:09.3490|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:30:09.3490|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:09.3490|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (2ms). 
2023-10-25 15:30:09.3490|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1207.0629ms 
2023-10-25 15:30:09.4908|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" received HEADERS frame for stream ID 3 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:30:09.4908|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:30:09.4908|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:09.5047|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:09.5047|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:09.6084|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending HEADERS frame for stream ID 3 with length 35 and flags END_HEADERS. 
2023-10-25 15:30:09.6084|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending DATA frame for stream ID 3 with length 6125 and flags NONE. 
2023-10-25 15:30:09.6084|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:30:09.6084|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:30:09.6084|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:09.6084|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:09.6084|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 115.1227ms 
2023-10-25 15:30:20.7232|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" received HEADERS frame for stream ID 5 with length 95 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:30:20.7232|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:30:20.7232|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 236 
2023-10-25 15:30:20.7232|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:30:20.7232|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:30:20.7232|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7JT703KT" received DATA frame for stream ID 5 with length 236 and flags END_STREAM. 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:20.7425|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:30:20.7425|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:30:20.7661|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:30:20.7661|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:30:20.7661|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:30:20.8369|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:30:20.8369|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:30:20.8514|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:30:20.8514|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:30:20.8514|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:30:20.8514|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:30:20.8514|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:30:20.8514|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:30:20.8514|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:30:20.8514|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:30:20.8643|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:30:20.8643|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:30:20.8643|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:30:20.8643|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7JT703KT", Request id "0HMUL7JT703KT:00000005": started reading request body. 
2023-10-25 15:30:20.8643|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7JT703KT", Request id "0HMUL7JT703KT:00000005": done reading request body. 
2023-10-25 15:30:20.8814|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:30:20.8814|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:30:20.8814|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:30:20.8814|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:30:20.8814|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:30:20.8814|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:30:20.8814|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:30:20.8814|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:30:20.8814|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:30:20.8814|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:30:20.8814|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:30:23.2452|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlavkghfa Lavlavch 
2023-10-25 15:30:23.4783|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:30:23.4955|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:30:23.6306|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:30:23.6479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:23.6479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:23.6479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:30:23.6479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:23.6479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:23.6479|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:30:23.6709|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:30:23.7090|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:23.7090|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 38ms reading results. 
2023-10-25 15:30:23.7090|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:23.7090|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)' 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:30:23.9651|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:23.9651|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:24.0221|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."AppUser"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.0832|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.0832|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:30:24.0832|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:30:24.1034|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:30:24.1508|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:24.1508|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.1508|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:24.1508|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.1508|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.1508|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:30:24.1508|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:30:24.1705|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'AppUser.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:30:24.1705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.1705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 14ms reading results. 
2023-10-25 15:30:24.1705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.1705|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:24.1836|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.1836|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:30:24.4008|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.4008|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.4008|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:30:24.4008|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:30:24.4104|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:30:24.4104|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:24.4104|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.4104|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:24.4104|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.4104|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.4104|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:30:24.4104|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:30:24.4104|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:30:24.4388|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.4388|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 25ms reading results. 
2023-10-25 15:30:24.4388|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.4388|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:24.4483|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.4483|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:30:24.5467|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:30:24.5467|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:30:24.5523|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:30:24.5523|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:24.5523|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.5523|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.5523|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:24.5523|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.5523|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:30:24.5523|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:30:24.6271|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.6271|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 70ms reading results. 
2023-10-25 15:30:24.6271|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.6271|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:24.6271|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:30:24.6271|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:30:24.6348|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:30:24.6348|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|1 entities were added and 0 entities were removed from skip navigation 'AppUser.Scopes'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.6609|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUserScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.6609|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:30:24.6609|0|DEBUG|Microsoft.EntityFrameworkCore.Update|Executing 2 update commands as a batch. 
2023-10-25 15:30:24.6609|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:24.6609|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Beginning transaction with isolation level 'Unspecified'. 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Began transaction with isolation level 'ReadCommitted'. 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:30:24.6768|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:30:24.6768|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committing transaction. 
2023-10-25 15:30:24.6921|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committed transaction. 
2023-10-25 15:30:24.6921|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:24.6921|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:24.6921|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Disposing transaction. 
2023-10-25 15:30:24.6921|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.6921|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUserScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:30:24.6921|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 2 entities written to the database. 
2023-10-25 15:30:25.2545|0|INFO|MyProger.Micro.Identity.Commands.Login.LoginCommandHandler|Request for login an account - Lavlavkghfa 
2023-10-25 15:30:25.4875|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:25.4875|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:25.4875|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:25.4875|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:25.4875|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:25.4875|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:30:25.4904|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:30:25.5318|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:25.5318|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 28ms reading results. 
2023-10-25 15:30:25.5318|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:25.5318|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:53.8700|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:30:53.9396|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:30:53.9610|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:30:53.9610|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:30:53.9610|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:30:53.9610|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:30:53.9610|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:30:53.9745|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:30:53.9745|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:30:53.9745|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:30:53.9745|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:30:53.9745|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:30:53.9745|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:30:53.9745|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:30:53.9745|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:30:54.1236|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:30:54.1396|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:30:54.1396|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:30:54.1396|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:30:54.1396|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:30:54.1396|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:30:54.1396|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:30:54.2011|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7KB041S7" received FIN. 
2023-10-25 15:30:54.2011|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7KB041S7" accepted. 
2023-10-25 15:30:54.2011|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7KB041S7" started. 
2023-10-25 15:30:54.2184|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:30:54.2434|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7KB041S7" stopped. 
2023-10-25 15:30:54.2434|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7KB041S7" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:30:54.3097|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7KB041S8" accepted. 
2023-10-25 15:30:54.3097|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7KB041S8" started. 
2023-10-25 15:30:54.3461|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL7KB041S8 established using the following protocol: Tls13 
2023-10-25 15:30:54.3681|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:30:54.3681|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:30:54.3681|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:30:54.3681|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:30:54.3681|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:30:54.3681|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received HEADERS frame for stream ID 1 with length 1619 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:30:54.3797|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:30:54.3797|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:30:54.3797|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:30:54.3797|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:30:54.5252|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:30:54.9331|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:30:54.9331|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:30:54.9331|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:30:55.0103|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:30:55.0103|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:30:55.1360|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:30:55.1549|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:30:55.2696|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:30:55.2901|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:55.2901|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:30:55.3156|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (22ms). 
2023-10-25 15:30:55.3200|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (29ms). 
2023-10-25 15:30:55.3200|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (32ms). 
2023-10-25 15:30:55.3200|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:55.4394|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:55.4472|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:55.4702|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:55.4780|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:55.4780|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 9ms reading results. 
2023-10-25 15:30:55.4780|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:55.4909|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:30:55.5912|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending HEADERS frame for stream ID 1 with length 66 and flags END_HEADERS. 
2023-10-25 15:30:55.5912|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending DATA frame for stream ID 1 with length 4758 and flags NONE. 
2023-10-25 15:30:55.5912|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending DATA frame for stream ID 1 with length 0 and flags END_STREAM. 
2023-10-25 15:30:55.5982|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:30:55.5982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:55.5982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (2ms). 
2023-10-25 15:30:55.5982|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1211.7482ms 
2023-10-25 15:30:55.7330|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received HEADERS frame for stream ID 3 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:30:55.7330|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:30:55.7330|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:55.7480|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:30:55.7480|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:55.8458|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending HEADERS frame for stream ID 3 with length 35 and flags END_HEADERS. 
2023-10-25 15:30:55.8458|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending DATA frame for stream ID 3 with length 6125 and flags NONE. 
2023-10-25 15:30:55.8458|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:30:55.8458|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:30:55.8476|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:30:55.8476|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:30:55.8476|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.3832ms 
2023-10-25 15:31:10.9798|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received HEADERS frame for stream ID 5 with length 95 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:31:10.9798|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:31:10.9798|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 236 
2023-10-25 15:31:10.9798|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:31:10.9798|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:31:10.9798|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received DATA frame for stream ID 5 with length 236 and flags END_STREAM. 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:31:10.9982|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:31:10.9982|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:31:11.0217|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:31:11.0217|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:31:11.0217|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:31:11.0810|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:31:11.0827|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:31:11.0827|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:31:11.0827|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:31:11.0827|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:31:11.0827|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:31:11.0827|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:31:11.0827|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:31:11.0827|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:31:11.0827|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:31:11.1068|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:31:11.1068|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:31:11.1068|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:31:11.1189|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7KB041S8", Request id "0HMUL7KB041S8:00000005": started reading request body. 
2023-10-25 15:31:11.1189|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7KB041S8", Request id "0HMUL7KB041S8:00000005": done reading request body. 
2023-10-25 15:31:11.1189|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:31:11.1189|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:31:11.1189|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:31:11.1189|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:31:11.1308|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:31:11.1308|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:31:11.1308|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:31:11.1308|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:31:11.1308|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:31:11.1308|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:31:11.1308|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:31:13.0871|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlavkafdg Lavlavch 
2023-10-25 15:31:13.4072|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:31:13.4230|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:31:13.5588|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:31:13.5761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:13.5761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:13.5761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:31:13.5761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:13.5761|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:13.5828|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:31:13.5994|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:31:13.6334|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:13.6334|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 34ms reading results. 
2023-10-25 15:31:13.6334|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:13.6334|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)' 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:31:13.9312|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:13.9312|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:31:13.9827|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."AppUser"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:14.0441|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:14.0441|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:31:14.0441|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:31:14.0640|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:31:14.1117|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:14.1117|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:14.1117|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:14.1117|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:14.1133|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:14.1133|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:31:14.1133|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:31:14.1309|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'AppUser.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:31:14.1309|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:14.1309|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 13ms reading results. 
2023-10-25 15:31:14.1309|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:14.1309|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:31:14.1309|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:14.1453|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:31:15.4504|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:15.4504|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:15.4504|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:31:15.4504|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:31:15.4599|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:31:15.4599|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:15.4599|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.4599|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:15.4599|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:15.4599|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:15.4599|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:31:15.4599|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:31:15.4926|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:31:15.4926|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.4926|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 39ms reading results. 
2023-10-25 15:31:15.4926|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.4926|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:31:15.4926|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:15.4926|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:31:15.6077|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:31:15.6077|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:31:15.6132|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:31:15.6132|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:15.6132|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:15.6132|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:15.6132|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:15.6132|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.6132|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:31:15.6132|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:31:15.6585|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.6585|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 40ms reading results. 
2023-10-25 15:31:15.6585|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.6585|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:31:15.6585|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:31:15.6585|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:31:15.6661|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:31:15.6661|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|1 entities were added and 0 entities were removed from skip navigation 'AppUser.Scopes'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:15.6913|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUserScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:15.6913|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:31:15.6913|0|DEBUG|Microsoft.EntityFrameworkCore.Update|Executing 2 update commands as a batch. 
2023-10-25 15:31:15.6913|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:15.6913|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Beginning transaction with isolation level 'Unspecified'. 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Began transaction with isolation level 'ReadCommitted'. 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:31:15.7073|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committing transaction. 
2023-10-25 15:31:15.7073|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committed transaction. 
2023-10-25 15:31:15.7228|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:15.7228|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:31:15.7228|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Disposing transaction. 
2023-10-25 15:31:15.7228|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:15.7228|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUserScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:31:15.7228|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 2 entities written to the database. 
2023-10-25 15:31:17.5842|0|INFO|MyProger.Micro.Identity.Commands.Login.LoginCommandHandler|Request for login an account - Lavlavkafdg 
2023-10-25 15:31:18.3320|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:31:18.3320|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:18.3320|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:31:18.3320|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:31:18.3320|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:18.3320|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:31:18.3320|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:31:18.3664|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:18.3664|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 24ms reading results. 
2023-10-25 15:31:18.3664|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:31:18.3664|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The unchanged property 'AppUser.RefreshToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:32:07.3814|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:32:07.4344|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (51ms) [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:32:07.4344|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:32:07.4344|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:32:07.4344|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:32:07.4344|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:32:07.4344|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:32:07.4344|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:32:39.2660|0|ERROR|MyProger.Micro.Identity.Commands.Login.LoginCommandHandler|[LoginCommandHandler]: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS512', the key size must be greater than: '512' bits, key has '144' bits. (Parameter 'keyBytes') System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS512', the key size must be greater than: '512' bits, key has '144' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at MyProger.Micro.Identity.Extensions.JwtExtensions.GenerateAccessToken(AppUser user, JwtOptions jwtOptions) in E:\DotNetProjects\MyProger\MyProger.Micro.Identity\Extensions\JwtExtensions.cs:line 52
   at MyProger.Micro.Identity.Commands.Login.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in E:\DotNetProjects\MyProger\MyProger.Micro.Identity\Commands\Login\LoginCommandHandler.cs:line 72
2023-10-25 15:32:40.2958|0|ERROR|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|[RegisterCommandHandler]: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS512', the key size must be greater than: '512' bits, key has '144' bits. (Parameter 'keyBytes') System.Security.Authentication.AuthenticationException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS512', the key size must be greater than: '512' bits, key has '144' bits. (Parameter 'keyBytes')
   at MyProger.Micro.Identity.Commands.Login.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in E:\DotNetProjects\MyProger\MyProger.Micro.Identity\Commands\Login\LoginCommandHandler.cs:line 85
   at MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler.Handle(RegisterCommand request, CancellationToken cancellationToken) in E:\DotNetProjects\MyProger\MyProger.Micro.Identity\Commands\Register\RegisterCommandHandler.cs:line 85
2023-10-25 15:32:40.3519|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:32:40.3519|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:32:40.3519|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:32:40.3519|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:32:40.3519|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) in 89257.5788ms 
2023-10-25 15:32:40.3519|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:32:40.4111|0|ERROR|Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware|An unhandled exception has occurred while executing the request. System.Security.Authentication.AuthenticationException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS512', the key size must be greater than: '512' bits, key has '144' bits. (Parameter 'keyBytes')
   at MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler.Handle(RegisterCommand request, CancellationToken cancellationToken) in E:\DotNetProjects\MyProger\MyProger.Micro.Identity\Commands\Register\RegisterCommandHandler.cs:line 107
   at MyProger.Micro.Identity.Controllers.IdentityController.Register(RegisterCommand request) in E:\DotNetProjects\MyProger\MyProger.Micro.Identity\Controllers\IdentityController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at MyProger.Micro.Identity.Middlewares.SeedMiddleware.Invoke(HttpContext context, DataSeeder seeder) in E:\DotNetProjects\MyProger\MyProger.Micro.Identity\Middlewares\SeedMiddleware.cs:line 15
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-10-25 15:32:40.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending HEADERS frame for stream ID 5 with length 60 and flags END_HEADERS. 
2023-10-25 15:32:40.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending DATA frame for stream ID 5 with length 5313 and flags NONE. 
2023-10-25 15:32:40.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:32:40.4111|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" received WINDOW_UPDATE frame for stream ID 5 with length 4 and flags 0x0. 
2023-10-25 15:32:40.4289|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7KB041S8" sending DATA frame for stream ID 5 with length 0 and flags END_STREAM. 
2023-10-25 15:32:40.4289|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:32:40.4289|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:32:40.4289|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:32:40.4289|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 236 - 500 - text/plain;+charset=utf-8 89448.8896ms 
2023-10-25 15:36:04.2367|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ModelBinderFactory|Registered model binder providers, in the following order: Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider, Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider 
2023-10-25 15:36:04.3016|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting starting 
2023-10-25 15:36:04.3208|0|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
2023-10-25 15:36:04.3208|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-986fe8c4-a792-4074-b9ad-6a118ccf56a9.xml'. 
2023-10-25 15:36:04.3208|0|DEBUG|Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository|Reading data from file 'C:\Users\Laven\AppData\Local\ASP.NET\DataProtection-Keys\key-cd28ee06-4595-46d4-8679-e06dac3a83e0.xml'. 
2023-10-25 15:36:04.3208|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {986fe8c4-a792-4074-b9ad-6a118ccf56a9}. 
2023-10-25 15:36:04.3208|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|Found key {cd28ee06-4595-46d4-8679-e06dac3a83e0}. 
2023-10-25 15:36:04.3351|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver|Considering key {cd28ee06-4595-46d4-8679-e06dac3a83e0} with expiration date 2023-12-21 09:26:14Z as default key. 
2023-10-25 15:36:04.3351|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:36:04.3351|0|DEBUG|Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor|Decrypting secret element using Windows DPAPI. 
2023-10-25 15:36:04.3351|0|DEBUG|Microsoft.AspNetCore.DataProtection.TypeForwardingActivator|Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60 
2023-10-25 15:36:04.3351|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC. 
2023-10-25 15:36:04.3351|0|DEBUG|Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngCbcAuthenticatedEncryptorFactory|Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC. 
2023-10-25 15:36:04.3351|0|DEBUG|Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider|Using key {cd28ee06-4595-46d4-8679-e06dac3a83e0} as the default key. 
2023-10-25 15:36:04.3351|0|DEBUG|Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService|Key ring with default key {cd28ee06-4595-46d4-8679-e06dac3a83e0} was loaded during application startup. 
2023-10-25 15:36:04.4784|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7124 
2023-10-25 15:36:04.4940|0|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5294 
2023-10-25 15:36:04.4940|0|DEBUG|Microsoft.AspNetCore.Hosting.Diagnostics|Loaded hosting startup assembly MyProger.Micro.Identity 
2023-10-25 15:36:04.4940|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. 
2023-10-25 15:36:04.4940|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development 
2023-10-25 15:36:04.4940|0|INFO|Microsoft.Hosting.Lifetime|Content root path: E:\DotNetProjects\MyProger\MyProger.Micro.Identity 
2023-10-25 15:36:04.4940|0|DEBUG|Microsoft.Extensions.Hosting.Internal.Host|Hosting started 
2023-10-25 15:36:04.6278|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7N7GINQ0" received FIN. 
2023-10-25 15:36:04.6321|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7N7GINQ0" accepted. 
2023-10-25 15:36:04.6321|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7N7GINQ0" started. 
2023-10-25 15:36:04.6455|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Failed to authenticate HTTPS connection. System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-25 15:36:04.6679|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7N7GINQ0" stopped. 
2023-10-25 15:36:04.6679|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets|Connection id "0HMUL7N7GINQ0" sending FIN because: "The Socket transport's send loop completed gracefully." 
2023-10-25 15:36:04.7375|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7N7GINQ1" accepted. 
2023-10-25 15:36:04.7375|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Connections|Connection id "0HMUL7N7GINQ1" started. 
2023-10-25 15:36:04.7763|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware|Connection 0HMUL7N7GINQ1 established using the following protocol: Tls13 
2023-10-25 15:36:04.7982|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:36:04.7982|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:36:04.7982|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received SETTINGS frame for stream ID 0 with length 24 and flags NONE. 
2023-10-25 15:36:04.8008|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:36:04.8008|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:36:04.8008|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received HEADERS frame for stream ID 1 with length 1619 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:36:04.8008|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received SETTINGS frame for stream ID 0 with length 0 and flags ACK. 
2023-10-25 15:36:04.8248|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - - 
2023-10-25 15:36:04.8248|0|DEBUG|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|Wildcard detected, all requests with hosts will be allowed. 
2023-10-25 15:36:04.8248|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:36:04.9530|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|An 'IServiceProvider' was created for internal use by Entity Framework. 
2023-10-25 15:36:05.3566|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'ScopesId'} was not created on entity type 'AppUserScopeEntity (Dictionary<string, object>)' as the properties are already covered by the index {'ScopesId', 'UsersId'}. 
2023-10-25 15:36:05.3566|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserRole<long>' as the properties are already covered by the index {'UserId', 'RoleId'}. 
2023-10-25 15:36:05.3566|0|DEBUG|Microsoft.EntityFrameworkCore.Model|The index {'UserId'} was not created on entity type 'IdentityUserToken<long>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}. 
2023-10-25 15:36:05.4329|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).ScopesId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:36:05.4329|0|DEBUG|Microsoft.EntityFrameworkCore.Model.Validation|The property 'AppUserScopeEntity (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name. 
2023-10-25 15:36:05.5566|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:36:05.5765|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Any()' 
2023-10-25 15:36:05.6931|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Scopes AS s)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    MyProger.Micro.Identity.Database.AppDbContext, 
    False, 
    False, 
    True
)
    .Single()' 
2023-10-25 15:36:05.7127|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:05.7127|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:36:05.7379|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (21ms). 
2023-10-25 15:36:05.7423|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (28ms). 
2023-10-25 15:36:05.7423|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (32ms). 
2023-10-25 15:36:05.7423|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:05.9664|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:05.9741|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:36:05.9982|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:36:06.0058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:06.0058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 9ms reading results. 
2023-10-25 15:36:06.0058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:06.0058|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (3ms). 
2023-10-25 15:36:06.1182|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending HEADERS frame for stream ID 1 with length 66 and flags END_HEADERS. 
2023-10-25 15:36:06.1182|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending DATA frame for stream ID 1 with length 4758 and flags NONE. 
2023-10-25 15:36:06.1182|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending DATA frame for stream ID 1 with length 0 and flags END_STREAM. 
2023-10-25 15:36:06.1182|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:36:06.1182|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:06.1306|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (2ms). 
2023-10-25 15:36:06.1306|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1307.4795ms 
2023-10-25 15:36:06.2608|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received HEADERS frame for stream ID 3 with length 114 and flags END_STREAM, END_HEADERS, PRIORITY. 
2023-10-25 15:36:06.2608|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - 
2023-10-25 15:36:06.2608|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:36:06.2743|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:06.2743|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:06.3731|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending HEADERS frame for stream ID 3 with length 35 and flags END_HEADERS. 
2023-10-25 15:36:06.3731|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending DATA frame for stream ID 3 with length 6125 and flags NONE. 
2023-10-25 15:36:06.3731|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:36:06.3731|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending DATA frame for stream ID 3 with length 0 and flags END_STREAM. 
2023-10-25 15:36:06.3731|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:06.3731|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:06.3731|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 110.7434ms 
2023-10-25 15:36:18.6915|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received HEADERS frame for stream ID 5 with length 95 and flags END_HEADERS, PRIORITY. 
2023-10-25 15:36:18.6922|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received PING frame for stream ID 0 with length 8 and flags NONE. 
2023-10-25 15:36:18.6922|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending PING frame for stream ID 0 with length 8 and flags ACK. 
2023-10-25 15:36:18.6922|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received DATA frame for stream ID 5 with length 236 and flags END_STREAM. 
2023-10-25 15:36:18.6922|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 236 
2023-10-25 15:36:18.6922|0|TRACE|Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware|All hosts are allowed. 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 7.0.12 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Creating DbConnection. 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Created DbConnection. (0ms). 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:36:18.7102|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS s) 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:36:18.7102|0|DEBUG|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|POST requests are not supported 
2023-10-25 15:36:18.7346|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|1 candidate(s) found for the request path '/api/v1/identity/register-user' 
2023-10-25 15:36:18.7346|0|DEBUG|Microsoft.AspNetCore.Routing.Matching.DfaMatcher|Endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' with route pattern 'api/v1/identity/register-user' is valid for the request path '/api/v1/identity/register-user' 
2023-10-25 15:36:18.7346|0|DEBUG|Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware|Request matched endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:36:18.7935|0|DEBUG|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|AuthenticationScheme: Bearer was not authenticated. 
2023-10-25 15:36:18.7935|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:36:18.8076|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyProger.Micro.Identity.Commands.Register.RegisterCommand) on controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity). 
2023-10-25 15:36:18.8076|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of authorization filters (in the following order): None 
2023-10-25 15:36:18.8076|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of resource filters (in the following order): None 
2023-10-25 15:36:18.8076|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000) 
2023-10-25 15:36:18.8076|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of exception filters (in the following order): None 
2023-10-25 15:36:18.8076|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000), Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0) 
2023-10-25 15:36:18.8076|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:36:18.8076|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed controller factory for controller MyProger.Micro.Identity.Controllers.IdentityController (MyProger.Micro.Identity) 
2023-10-25 15:36:18.8195|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:36:18.8195|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' using the name '' in request data ... 
2023-10-25 15:36:18.8195|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'. 
2023-10-25 15:36:18.8195|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7N7GINQ1", Request id "0HMUL7N7GINQ1:00000005": started reading request body. 
2023-10-25 15:36:18.8195|0|DEBUG|Microsoft.AspNetCore.Server.Kestrel|Connection id "0HMUL7N7GINQ1", Request id "0HMUL7N7GINQ1:00000005": done reading request body. 
2023-10-25 15:36:18.8367|0|DEBUG|Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter|JSON input formatter succeeded, deserializing to type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' 
2023-10-25 15:36:18.8367|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:36:18.8367|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to bind parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:36:18.8367|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand' ... 
2023-10-25 15:36:18.8367|0|DEBUG|Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder|Done attempting to validate the bound parameter 'request' of type 'MyProger.Micro.Identity.Commands.Register.RegisterCommand'. 
2023-10-25 15:36:18.8367|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:36:18.8367|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:36:18.8367|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:36:18.8367|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:36:18.8478|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) - Validation state: Valid 
2023-10-25 15:36:18.8478|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executing action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) with arguments (MyProger.Micro.Identity.Commands.Register.RegisterCommand) 
2023-10-25 15:36:20.7865|0|INFO|MyProger.Micro.Identity.Commands.Register.RegisterCommandHandler|Request for login an account - Lavlavkfdga Lavlavch 
2023-10-25 15:36:21.1314|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.UserName == __name_0)' 
2023-10-25 15:36:21.1487|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:36:21.2825|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.UserName == @__name_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:36:21.2994|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:21.2994|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:21.3017|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (2ms). 
2023-10-25 15:36:21.3017|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:21.3017|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.3017|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:36:21.3213|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:36:21.3551|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.3551|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 33ms reading results. 
2023-10-25 15:36:21.3551|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.3551|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)' 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:36:21.6195|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.6195|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:21.6716|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."AppUser"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:21.7321|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:21.7321|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:36:21.7321|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:36:21.7525|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:36:21.8010|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:21.8010|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.8010|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:21.8010|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:21.8010|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:21.8010|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:36:21.8010|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Boolean), @p18='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "BirthDate", "ConcurrencyStamp", "Email", "EmailConfirmed", "Firstname", "Lastname", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "Patronymic", "PhoneNumber", "PhoneNumberConfirmed", "RefreshToken", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18)
RETURNING "Id"; 
2023-10-25 15:36:21.8204|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'AppUser.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:36:21.8204|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.8204|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 14ms reading results. 
2023-10-25 15:36:21.8204|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:21.8204|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:21.8336|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:21.8336|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:36:22.0733|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|'"AppDbContext"' generated a temporary value for the property '"Id"."ScopeEntity"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:22.0733|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'ScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:22.0733|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:36:22.0733|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:36:22.0829|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:36:22.0829|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:22.0829|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.0829|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:22.0829|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:22.0829|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:22.0829|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:36:22.0829|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Scopes" ("CreatedAt", "Name")
VALUES (@p0, @p1)
RETURNING "Id"; 
2023-10-25 15:36:22.1071|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The foreign key property 'ScopeEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:36:22.1172|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.1172|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 42ms reading results. 
2023-10-25 15:36:22.1172|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.1172|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:22.1295|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'ScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:22.1295|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<AppUser>()
    .Include(x => x.Scopes)
    .FirstOrDefault(x => x.Id == __userId_0)' 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'AppUser.Scopes'. 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SingleQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.BirthDate (DateTime?), 2], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 3], [Property: AppUser.Email (string) MaxLength(256), 4], [Property: AppUser.EmailConfirmed (bool) Required, 5], [Property: AppUser.Firstname (string), 6], [Property: AppUser.Lastname (string), 7], [Property: AppUser.LockoutEnabled (bool) Required, 8], [Property: AppUser.LockoutEnd (DateTimeOffset?), 9], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 10], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 11], [Property: AppUser.PasswordHash (string), 12], [Property: AppUser.Patronymic (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.RefreshToken (string), 16], [Property: AppUser.SecurityStamp (string), 17], [Property: AppUser.TwoFactorEnabled (bool) Required, 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 20], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 21] }
                3 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ScopeEntity.CreatedAt (DateTime) Required, 23], [Property: ScopeEntity.Name (string) Required, 24] }
                4 -> 20
                5 -> 21
                6 -> 22
            SELECT t.Id, t.AccessFailedCount, t.BirthDate, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.Firstname, t.Lastname, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.Patronymic, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, t0.ScopesId, t0.UsersId, t0.Id, t0.CreatedAt, t0.Name
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.Firstname, a.Lastname, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.Patronymic, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.Id == @__userId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a0.ScopesId, a0.UsersId, s.Id, s.CreatedAt, s.Name
                FROM AppUserScopeEntity AS a0
                INNER JOIN Scopes AS s ON a0.ScopesId == s.Id
            ) AS t0 ON t.Id == t0.UsersId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppUser>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.2144|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:36:22.2246|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:36:22.2660|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.2660|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 32ms reading results. 
2023-10-25 15:36:22.2660|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.2660|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:22.2660|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Compiling query expression: 
'DbSet<ScopeEntity>()
    .Include(x => x.Users)
    .FirstOrDefault(x => x.Name == __scopeName_0)' 
2023-10-25 15:36:22.2660|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Including navigation: 'ScopeEntity.Users'. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Query|Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScopeEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<ScopeEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScopeEntity.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScopeEntity.CreatedAt (DateTime) Required, 1], [Property: ScopeEntity.Name (string) Required, 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: AppUserScopeEntity (Dictionary<string, object>).ScopesId (no field, long) Indexer Required PK FK AfterSave:Throw, 3], [Property: AppUserScopeEntity (Dictionary<string, object>).UsersId (no field, long) Indexer Required PK FK Index AfterSave:Throw, 4] }
                3 -> Dictionary<IProperty, int> { [Property: AppUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: AppUser.AccessFailedCount (int) Required, 6], [Property: AppUser.BirthDate (DateTime?), 7], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 8], [Property: AppUser.Email (string) MaxLength(256), 9], [Property: AppUser.EmailConfirmed (bool) Required, 10], [Property: AppUser.Firstname (string), 11], [Property: AppUser.Lastname (string), 12], [Property: AppUser.LockoutEnabled (bool) Required, 13], [Property: AppUser.LockoutEnd (DateTimeOffset?), 14], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 15], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 16], [Property: AppUser.PasswordHash (string), 17], [Property: AppUser.Patronymic (string), 18], [Property: AppUser.PhoneNumber (string), 19], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 20], [Property: AppUser.RefreshToken (string), 21], [Property: AppUser.SecurityStamp (string), 22], [Property: AppUser.TwoFactorEnabled (bool) Required, 23], [Property: AppUser.UserName (string) MaxLength(256), 24] }
                4 -> 3
                5 -> 4
                6 -> 5
            SELECT t.Id, t.CreatedAt, t.Name, t0.ScopesId, t0.UsersId, t0.Id, t0.AccessFailedCount, t0.BirthDate, t0.ConcurrencyStamp, t0.Email, t0.EmailConfirmed, t0.Firstname, t0.Lastname, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.Patronymic, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedAt, s.Name
                FROM Scopes AS s
                WHERE s.Name == @__scopeName_0
            ) AS t
            LEFT JOIN 
            (
                SELECT a.ScopesId, a.UsersId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.Firstname, a0.Lastname, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.Patronymic, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RefreshToken, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
                FROM AppUserScopeEntity AS a
                INNER JOIN AspNetUsers AS a0 ON a.UsersId == a0.Id
            ) AS t0 ON t.Id == t0.ScopesId
            ORDER BY t.Id ASC, t0.ScopesId ASC, t0.UsersId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScopeEntity>, 
        MyProger.Micro.Identity.Database.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)' 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:36:22.2750|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__scopeName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."Name", t0."ScopesId", t0."UsersId", t0."Id", t0."AccessFailedCount", t0."BirthDate", t0."ConcurrencyStamp", t0."Email", t0."EmailConfirmed", t0."Firstname", t0."Lastname", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."Patronymic", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."RefreshToken", t0."SecurityStamp", t0."TwoFactorEnabled", t0."UserName"
FROM (
    SELECT s."Id", s."CreatedAt", s."Name"
    FROM "Scopes" AS s
    WHERE s."Name" = @__scopeName_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a."ScopesId", a."UsersId", a0."Id", a0."AccessFailedCount", a0."BirthDate", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."Firstname", a0."Lastname", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."Patronymic", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UserName"
    FROM "AppUserScopeEntity" AS a
    INNER JOIN "AspNetUsers" AS a0 ON a."UsersId" = a0."Id"
) AS t0 ON t."Id" = t0."ScopesId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:36:22.2750|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|1 entities were added and 0 entities were removed from skip navigation 'AppUser.Scopes'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:22.3021|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|Context 'AppDbContext' started tracking 'AppUserScopeEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:22.3021|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:36:22.3021|0|DEBUG|Microsoft.EntityFrameworkCore.Update|Executing 2 update commands as a batch. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Beginning transaction with isolation level 'Unspecified'. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Began transaction with isolation level 'ReadCommitted'. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:36:22.3169|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p21='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p22='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?' (DbType = Boolean), @p17='?', @p18='?', @p19='?' (DbType = Boolean), @p20='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AppUserScopeEntity" ("ScopesId", "UsersId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "BirthDate" = @p3, "ConcurrencyStamp" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "Firstname" = @p7, "Lastname" = @p8, "LockoutEnabled" = @p9, "LockoutEnd" = @p10, "NormalizedEmail" = @p11, "NormalizedUserName" = @p12, "PasswordHash" = @p13, "Patronymic" = @p14, "PhoneNumber" = @p15, "PhoneNumberConfirmed" = @p16, "RefreshToken" = @p17, "SecurityStamp" = @p18, "TwoFactorEnabled" = @p19, "UserName" = @p20
WHERE "Id" = @p21 AND "ConcurrencyStamp" = @p22; 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committing transaction. 
2023-10-25 15:36:22.3169|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Committed transaction. 
2023-10-25 15:36:22.3338|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:22.3338|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:22.3338|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Transaction|Disposing transaction. 
2023-10-25 15:36:22.3338|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:22.3338|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUserScopeEntity' tracked by 'AppDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:22.3338|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 2 entities written to the database. 
2023-10-25 15:36:22.8509|0|INFO|MyProger.Micro.Identity.Commands.Login.LoginCommandHandler|Request for login an account - Lavlavkfdga 
2023-10-25 15:36:23.5844|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:23.5844|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:23.5844|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:23.5844|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:23.5844|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:23.5844|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:36:23.5844|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__name_0='?'], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."AccessFailedCount", t."BirthDate", t."ConcurrencyStamp", t."Email", t."EmailConfirmed", t."Firstname", t."Lastname", t."LockoutEnabled", t."LockoutEnd", t."NormalizedEmail", t."NormalizedUserName", t."PasswordHash", t."Patronymic", t."PhoneNumber", t."PhoneNumberConfirmed", t."RefreshToken", t."SecurityStamp", t."TwoFactorEnabled", t."UserName", t0."ScopesId", t0."UsersId", t0."Id", t0."CreatedAt", t0."Name"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."BirthDate", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."Firstname", a."Lastname", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."Patronymic", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."UserName" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT a0."ScopesId", a0."UsersId", s."Id", s."CreatedAt", s."Name"
    FROM "AppUserScopeEntity" AS a0
    INNER JOIN "Scopes" AS s ON a0."ScopesId" = s."Id"
) AS t0 ON t."Id" = t0."UsersId"
ORDER BY t."Id", t0."ScopesId", t0."UsersId" 
2023-10-25 15:36:23.6165|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:23.6165|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 23ms reading results. 
2023-10-25 15:36:23.6165|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:23.6165|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:31.5656|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges starting for 'AppDbContext'. 
2023-10-25 15:36:31.5656|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges starting for 'AppDbContext'. 
2023-10-25 15:36:31.5656|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|The unchanged property 'AppUser.RefreshToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Unchanged' to 'Modified'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|DetectChanges completed for 'AppDbContext'. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opening connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Opened connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Creating DbCommand for 'ExecuteReader'. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Created DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Initialized DbCommand for 'ExecuteReader' (0ms). 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Executing DbCommand [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:36:31.5667|0|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p2='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "AspNetUsers" SET "RefreshToken" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2; 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|Closing data reader to 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Command|A data reader for 'IdentityDbDevelopment' on server 'tcp://localhost:5433' is being disposed after spending 0ms reading results. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closing connection to database 'IdentityDbDevelopment' on server 'tcp://localhost:5433'. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Closed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.ChangeTracking|An entity of type 'AppUser' tracked by 'AppDbContext' changed state from 'Modified' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values. 
2023-10-25 15:36:31.5667|0|DEBUG|Microsoft.EntityFrameworkCore.Update|SaveChanges completed for 'AppDbContext' with 1 entities written to the database. 
2023-10-25 15:36:46.7858|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action method MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27935.3528ms. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult. 
2023-10-25 15:36:46.7858|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter 
2023-10-25 15:36:46.7858|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|No information found on request to perform content negotiation. 
2023-10-25 15:36:46.7858|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types 'application/json'. 
2023-10-25 15:36:46.7858|0|DEBUG|Microsoft.AspNetCore.Mvc.Infrastructure.DefaultOutputFormatterSelector|Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response. 
2023-10-25 15:36:46.7858|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending HEADERS frame for stream ID 5 with length 66 and flags END_HEADERS. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending DATA frame for stream ID 5 with length 567 and flags NONE. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ProducesAttribute. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received WINDOW_UPDATE frame for stream ID 0 with length 4 and flags 0x0. 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" received WINDOW_UPDATE frame for stream ID 5 with length 4 and flags 0x0. 
2023-10-25 15:36:46.7858|0|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity) in 27986.8972ms 
2023-10-25 15:36:46.7858|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'MyProger.Micro.Identity.Controllers.IdentityController.Register (MyProger.Micro.Identity)' 
2023-10-25 15:36:46.7858|0|TRACE|Microsoft.AspNetCore.Server.Kestrel.Http2|Connection id "0HMUL7N7GINQ1" sending DATA frame for stream ID 5 with length 0 and flags END_STREAM. 
2023-10-25 15:36:46.7858|0|DEBUG|Microsoft.EntityFrameworkCore.Infrastructure|'AppDbContext' disposed. 
2023-10-25 15:36:46.7858|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposing connection to database 'IdentityDbDevelopment' on server ''. 
2023-10-25 15:36:46.7858|0|DEBUG|Microsoft.EntityFrameworkCore.Database.Connection|Disposed connection to database 'IdentityDbDevelopment' on server '' (0ms). 
2023-10-25 15:36:46.7858|0|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7124/api/v1/identity/register-user application/json 236 - 200 - application/json;+charset=utf-8 28107.7323ms 
